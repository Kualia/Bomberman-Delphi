unit Character;

interface

uses
  BaseClasses, Screen, Vcl.Dialogs, System.SysUtils;

type
  TAgent = class(TGameObject)
  private
    Health    :Integer;
    Speed     :Integer;

  public
    constructor Create(PosX, PosY, Health, Speed :Integer); overload;
    procedure   GetHit(Damage :Integer);
    procedure   Die();
  end;

  TCharacter = class(TAgent)
  public
    constructor Create(PosX, PosY, Health, Speed :Integer);
    procedure Update(KeyState: TKeys);
    procedure Draw(ScreenBuffer :TScreenBuffer);
  end;

implementation

{ TAgent }
constructor TAgent.Create(PosX, PosY, Health, Speed :Integer);
begin
  inherited Create(PosX, PosY);

  Self.Health   := Health;
  Self.Speed    := Speed;
  ShowMessage('TAgent created spd:' + IntToStr(Speed));
end;

procedure TAgent.GetHit(Damage :Integer);
begin
  Health := Health - Damage;
  if Health <= 0 then
    Die();
  
end;




{ TCharacter }
constructor TCharacter.Create(PosX, PosY, Health, Speed :Integer);
begin
  //showmessage
  inherited Create(PosX, PosY, Health, Speed);

  ShowMessage('TAgent created spd:' + IntToStr(Speed));
end;

procedure TCharacter.Update(KeyState: TKeys);
begin
  case KeyState of
    TKeys.UPKEY     :Move(TDirection.UP);      // Key W
    TKeys.DOWNKEY   :Move(TDirection.DOWN);    // Key S
    TKeys.LEFTKEY   :Move(TDirection.LEFT);    // Key A
    TKeys.RIGHTKEY  :Move(TDirection.RIGHT);   // Key D
  end;
end;

procedure TCharacter.Draw(ScreenBuffer: TScreenBuffer);
begin
//  ShowMessage('Chardraw X:' + IntToStr(position.X) + ' Y:' + IntToStr(position.y)+ 'spd: ' + IntToStr(speed));
  ScreenBuffer[PosY, PosX] := 'C';
end;

end.
